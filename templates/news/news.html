{% extends 'news/base.html' %}
{% load staticfiles %}

{% block title %}{{news.title}}{% endblock %}

{% block side_block %}

<span>热门点击</span>
<ul class="nav nav-sidebar">
	{% if hot_news %}
	{% for h in hot_news %}
	<li><a href="{% url 'news:news' %}?id={{h.id}}">{{ h.title }}<span class="badge" style="float: right;">{{h.views}}次</span></a></li>
	{% endfor %}
	<li><a href="#">更多...</a></li>
	{% else %}
	<li> <strong >没有相关新闻.</strong></li>
	{% endif %}
</ul>

<span>热门评论</span>
<ul class="nav nav-sidebar">
	{% if favorite_news %}
	{% for f in favorite_news %}
	<li><a href="{% url 'news:news' %}?id={{f.id}}">{{ f.title }}<span  class="badge" style="float: right;">{{f.comments}}次</span></a></li>
	{% endfor %}
	<li><a href="#">更多...</a></li>
	{% else %}
	<li> <strong >没有相关新闻.</strong></li>
	{% endif %}
</ul>

{% endblock %}


{% block body_block %}

<div class="col-md-12">
	{% if news %}
	<div id="news-container" class="col-md-8" style="border: thin solid rgba(0,0,0,0.2);padding:1%">
		<div class="col-md-12" style="float:left;margin-left:0px;">
			<h2 style="margin-top:0px;text-align: center">{{news.title}}</h2>
			<hr />
			<p style="text-indent: 0em;text-align: center;"><span>时间:{{news.pub_date}}</span><span style="margin-left:10px">来源:{{news.source}}</span><span style="margin-left:10px">作者:{{news.author}}</span><span style="margin-left:10px">阅读:{{news.views}}次</span><span style="margin-left:10px">评论:{{news.comments}}次</span></p>
			<div class="col-md-12" id="news-content">
				{{news.content|safe}}
			</div>
		</div>
	</div>

	<div id="relative-news-container" class="col-md-3" style="text-align:center;float:right;border: thin solid rgba(0,0,0,0.2);padding:1%">

		<span>猜你喜欢</span>
		{% if guess_you_like %}
		<div id="carousel-example-generic" class="carousel slide" data-ride="carousel" >
			<div class="carousel-inner" role="listbox">
				{% for news in guess_you_like %}
				{% ifequal forloop.counter 1 %}
				<div class="item active">
					{% else %}
					<div class="item">
						{% endifequal %}
						<a href="{% url 'news:news' %}?id={{news.id}}">
							<img style="width:320px;height:180px;" src="/{{news.picture}}" alt="{{news.title}}">
							<span style="text-align: left;" href="{% url 'news:news' %}?id={{news.id}}">{{news.title}}</span>
						</a>
					</div>
					{% endfor %}
				</div>
			</div>
			{% else %}
			<br />
			<strong >没有相关新闻.</strong>
			{% endif %}

			<hr />

			<span>同类新闻</span>
			{% if relative_news %}
			<div class="col-md-12" style="text-align: left;">
				<ul class="nav nav-sidebar">
					{% for r in relative_news %}
					<li><a href="{% url 'news:news' %}?id={{r.id}}">{{ r.title }}</a></li>
					{% endfor %}
					<li><a href="#">更多...</a></li>
				</ul>			
			</div>
			{% else %}
			<br />
			<strong>没有相关新闻.</strong>
			{% endif %}	
		</div>
		{% else %}
		<h1>404错误,请返回首页!</h1>
		{% endif %}
	</div>
</div>
<div class="btn-group" role="group" aria-label="..." style="position: fixed;bottom:50px;right:50px">
	<a class="btn btn-default btn-primary" href="#body"><span class="glyphicon glyphicon-arrow-up"></span> 返回顶部</a>
</div>
<div class="col-md-12">

	<div id="comments-container" class="col-md-8" style="margin-top:20px;border: thin solid rgba(0,0,0,0.2);padding:1%">
		<h2>评论区</h2>
		<hr />
		{% if comments %}
		{% for comment in comments %}
		<!-- comment -->
		<div class="col-md-12" style="float:left;margin-top:10px;margin-left:0px;border: thin solid rgba(0,0,0,0.2);padding:1%">
			<div class="col-md-2" style="margin-top:0px;border: thin solid rgba(0,0,0,0.2);padding:1%">
				<img src="{% static 'favicon.ico' %}" style="width:100%" alt="#" />
			</div>
			<div class="col-md-10" style="float:left;margin-left:0px;">
				<h3 style="margin-top:0px"><a href="#"><span>{{comment.author}}</span></a><span style="float:right;font-size: 15px;">{{comment.pub_date}}</span></h3>
				<!-- Reply content -->
				{% if comment.reply_to %}
				<div class="col-md-12" style="margin-top:10px;margin-left:0px;border: thin solid rgba(0,0,0,0.2);padding:1%">
				<p style="margin-top:0px"><a href="#"><span>{{comment.reply_to.author}}</span></a><span style="float:right;font-size: 15px;">{{comment.reply_to.pub_date}}</span></p>
				<p style="margin-top:0px">{{comment.reply_to.content}}</p>
				</div>
				{% endif %}
				<!-- Reply content over -->
				<div class="col-md-12" style="padding:0px;margin-top:10px;margin-bottom:10px;">

				<p style="margin-top:0px">{{comment.content}}</p>
				</div>
				<p style="float:right;font-size: 20px;">
					<button type="button" class="btn btn-primary">
						<span class="glyphicon glyphicon-thumbs-up" ></span>
						{{comment.vote_ups}}
					</button>
					<button type="button" class="btn btn-primary" style="margin-left:20px;">
						<span class="glyphicon glyphicon-share"></span>
						回复
					</button>
				</p>
			</div>
		</div>
		<!-- comment over -->
		{% endfor %}
		{% else %}
		<h2 style="text-align: center">暂无评论</h2><a href="#" style="float:right">点此发布第一条评论</a>
		{% endif %}
	</div>
</div>


{% endblock %}